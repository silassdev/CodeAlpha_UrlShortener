<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>URL Shortener</title>
  <style>body{font-family:system-ui;padding:2rem;max-width:700px;margin:auto}</style>
</head>
<body>
  <h1>Shorten URL</h1>
  <form id="f">
    <input id="url" placeholder="https://example.com/very/long" style="width:100%" required>
    <button>Shorten</button>
  </form>
  <p id="out"></p>
  <script>
    document.getElementById('f').onsubmit = async e => {
      e.preventDefault();
      const originalUrl = document.getElementById('url').value;
      const res = await fetch('/api/shorten', {
        method:'POST',
        headers:{'content-type':'application/json'},
        body: JSON.stringify({ originalUrl })
      });
      const data = await res.json();
      if (res.ok) {
        document.getElementById('out').innerHTML = 'Short URL: <a href="'+data.shortUrl+'">'+data.shortUrl+'</a>';
      } else {
        document.getElementById('out').textContent = data.error || JSON.stringify(data);
      }
    }
  </script>
</body>
</html>
